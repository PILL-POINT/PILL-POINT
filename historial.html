<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="assets/images/favicon.svg" type="image/x-icon" />
    <title>PillPoint</title>

    <!-- ========== All CSS files linkup ========= -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/lineicons.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="assets/css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="assets/css/fullcalendar.css" />
    <link rel="stylesheet" href="assets/css/fullcalendar.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
  </head>
  <body>
    <!-- ======== Preloader =========== -->
    <div id="preloader">
      <div class="spinner"></div>
    </div>
    <!-- ======== Preloader =========== -->

    

<!-- ======== main-wrapper start =========== -->
<main class="main-wrapper" style="margin:0;padding:0;width:100vw;max-width:100vw;overflow-x:hidden;">
  <!-- ========== header start ========== -->
  <header class="header">
  <div class="container-fluid d-flex align-items-center justify-content-between">

    <!-- Contenedor izquierdo: logo + menú -->
    <div class="d-flex align-items-center">
      <div class="logo-box me-3">
        <a href="inicio.html"><img src="logo.png" alt="Logo" class="logo-img" /></a>
      </div>

      <!-- Botón hamburguesa (solo en móvil) -->
      <button class="menu-toggle d-md-none" onclick="toggleMenu()">☰</button>

      <!-- Menú de navegación -->
      <nav id="responsiveMenu" class="nav-inline d-none d-md-flex">
        <a href="agenda.html">Tratamientos</a>
        <a href="registros.html">Registros</a>
        <a href="historial.html">Historial</a>
        <a href="dispositivo.html">Dispositivo</a>
      </nav>
    </div>






    





      
      <!-- Header Right: Vacío o listo para otro contenido -->
      <div class="col-lg-7 col-md-7 col-6">
        <div class="header-right">
          <!-- Puedes agregar algo aquí si lo necesitas -->
          
  <div class="notification-box ml-15 d-none d-md-flex">
                  <button class="dropdown-toggle" type="button" id="notification" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M11 20.1667C9.88317 20.1667 8.88718 19.63 8.23901 18.7917H13.761C13.113 19.63 12.1169 20.1667 11 20.1667Z"
                        fill="" />
                      <path
                        d="M10.1157 2.74999C10.1157 2.24374 10.5117 1.83333 11 1.83333C11.4883 1.83333 11.8842 2.24374 11.8842 2.74999V2.82604C14.3932 3.26245 16.3051 5.52474 16.3051 8.24999V14.287C16.3051 14.5301 16.3982 14.7633 16.564 14.9352L18.2029 16.6342C18.4814 16.9229 18.2842 17.4167 17.8903 17.4167H4.10961C3.71574 17.4167 3.5185 16.9229 3.797 16.6342L5.43589 14.9352C5.6017 14.7633 5.69485 14.5301 5.69485 14.287V8.24999C5.69485 5.52474 7.60672 3.26245 10.1157 2.82604V2.74999Z"
                        fill="" />
                    </svg>
                    <span></span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notification">
                    <li>
                      <a href="#0">
                        <div class="image">
                          <img src="assets/images/lead/lead-1.png" alt="" />
                        </div>
                        <div class="content">
                          <h6>
                            Usuario
                          </h6>
                          <p>
                            Tienes <b>1</b> medicamento pendiente:
                            Clonazepam 0.5 mg cada 24 horas.
                          </p>
                          <span>Hace un momento.</span>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>


                <div class="profile-box ml-15">
                  <button class="dropdown-toggle bg-transparent border-0" type="button" id="profile"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <div class="profile-info">
                      <div class="info">
                        <div class="image">
                          <img src="assets/images/profile/profile-image.png" alt="" />
                        </div>
                        <div>
                          <h6 class="fw-500">Emmanuel</h6>
                          <p>Usuario</p>
                        </div>
                      </div>
                    </div>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profile">
                    <li>
                      <div class="author-info flex items-center !p-1">
                        <div class="image">
                          <img src="assets/images/profile/profile-image.png" alt="image">
                        </div>
                        <div class="content">
                          <h4 class="text-sm">Emmanuel</h4>
                          <a class="text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white text-xs" href="#">Email@gmail.com</a>
                        </div>
                      </div>
                    </li>
                    <li class="divider"></li>
                    <li>
                      <a href="#0">
                        <i class="lni lni-user"></i> Ver perfil
                      </a>
                    </li>
                    <li>
                      <a href="#0">
                        <i class="lni lni-alarm"></i> Notificaciones
                      </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                      <a href="#0"> <i class="lni lni-exit"></i> Cerrar sesión </a>
                    </li>
                  </ul>
                </div>
                
        </div>
      </div>
    </div>
  </div>
</header>
    
    
      <!-- ========== section start ========== -->
      <section class="section" style="margin:0 20px;padding:0;width:auto;max-width:100vw;">
        <div class="container-fluid" style="margin:0;padding:0;width:auto;max-width:100vw;">
          <!-- ========== title-wrapper start ========== -->
          <div class="title-wrapper pt-30">
            <div class="row align-items-center">
            </div>
            <!-- end row -->
          </div>
          <!-- ========== title-wrapper end ========== -->



          <!-- ========== section start ========== -->
      <section class="section" style="margin:0 20px;padding:0;width:auto;max-width:100vw;">
        <div class="container-fluid" style="margin:0;padding:0;width:auto;max-width:100vw;">

          <br>

          <div class="card-style mb-30">
            <div class="table-responsive">
              <h3 class="text-bold mb-3 text-center">Agenda de Tratamientos</h3>
              <table class="table top-selling-table">
                <thead>
                  <tr>
                    <th><h6 class="text-sm text-medium">Medicamento</h6></th>
                    <th><h6 class="text-sm text-medium">Cantidad</h6></th>
                    <th><h6 class="text-sm text-medium">Tipo</h6></th>
                    <th><h6 class="text-sm text-medium">Inicio</h6></th>
                    <th><h6 class="text-sm text-medium">Fin</h6></th>
                    <th><h6 class="text-sm text-medium">Notas</h6></th>
                  </tr>
                </thead>
                <tbody id="historial-tabla">
                  <!-- Aquí se insertarán los medicamentos dinámicamente -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
      <div style="margin-bottom:40px;"></div>
      <footer class="footer">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-6">
              <div class="terms d-flex justify-content-center justify-content-md-end">
                <a href="#0" class="text-sm">Términos y Condiciones</a>
                <a href="#0" class="text-sm ml-15">Política de Privacidad</a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </main>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script>






function toggleMenu() {
  const menu = document.getElementById('responsiveMenu');
  menu.classList.toggle('show');
}

  function toggleMenu() {
    const menu = document.getElementById('responsiveMenu');
    menu.classList.toggle('d-none');
    setTimeout(() => {
      menu.classList.toggle('show');
    }, 10);
  }

  function closeMenu() {
    const menu = document.getElementById('responsiveMenu');
    menu.classList.remove('show');
    setTimeout(() => {
      menu.classList.add('d-none');
    }, 300);
  }

  // Cierra el menú si haces clic fuera
  document.addEventListener('click', function (event) {
    const menu = document.getElementById('responsiveMenu');
    const toggle = document.querySelector('.menu-toggle');

    if (
      menu.classList.contains('show') &&
      !menu.contains(event.target) &&
      !toggle.contains(event.target)
    ) {
      closeMenu();
    }
  });





      
      document.addEventListener("DOMContentLoaded", function () {
        var historial = [];
        try {
          historial = JSON.parse(localStorage.getItem("tratamientos")) || [];
        } catch (e) {
          historial = [];
        }
        var tabla = document.getElementById("historial-tabla");
        tabla.innerHTML = "";
        if (historial.length === 0) {
          var fila = document.createElement("tr");
          fila.innerHTML = '<td colspan="6" class="text-center text-muted">No hay medicamentos en el historial.</td>';
          tabla.appendChild(fila);
        } else {
          historial.forEach(function(t) {
            var fila = document.createElement("tr");
            fila.innerHTML = `
              <td><p class='text-sm'>${t.nombre || "Sin nombre"}</p></td>
              <td><p class='text-sm'>${t.cantidad || "-"} ${t.unidad || ""}</p></td>
              <td><p class='text-sm'>${t.tipo || "-"}</p></td>
              <td><p class='text-sm'>${t.inicio || "-"}</p></td>
              <td><p class='text-sm'>${t.fin || "-"}</p></td>
              <td><p class='text-sm'>${t.notas || "-"}</p></td>
            `;
            tabla.appendChild(fila);
          });
        }
      });
    </script>
  </body>
</html>
